(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"8cdf":function(t,e,s){"use strict";s("f4f4")},a726:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"text-center",attrs:{padding:""}},[e("div",{staticClass:"text-center text-h5 q-my-lg"},[t._v("\n    "+t._s(t.$t("studies.tasks.qcst.title"))+"\n  ")]),e("p",{attrs:{id:"timer"}},[t._v(" "+t._s(t.minutes)+":"+t._s(t.seconds)+" ")]),e("q-btn",{ref:"metronome_indicator",staticClass:"q-mt-xl",attrs:{padding:"xl",color:"black",round:"",flat:"",icon:"volume_up",disabled:!t.isStarted}}),e("div",{staticClass:"row justify-center q-mt-xl"},[t.isStarted?t._e():e("q-btn",{staticClass:"full-width mobibtn",attrs:{color:"primary",label:t.$t("common.start")},on:{click:t.startTest}}),t.isStarted?e("q-btn",{staticClass:"full-width mobibtn",attrs:{color:"negative",label:t.$t("common.complete")},on:{click:t.completeTest}}):t._e()],1)],1)},i=[],o=(s("14d9"),s("a5f6")),n=s("022d"),r=s("9bf1"),c=s("7937");const d=180;var l={name:"QCSTPage",props:{studyKey:String,taskId:Number},components:{},data:function(){return{isStarted:!1,isCompleted:!1,timer:null,countDown:d,startedTS:void 0,steps:[],gender:r["a"].user.gender,heartRate:"",cadence:"male"===r["a"].user.gender?625:681}},methods:{async startTest(){this.isStarted||(this.isStarted=!0,this.startedTS=new Date,n["a"].textToSpeech.language=r["a"].user.language,await o["a"].pedometer.isAvailable()?o["a"].pedometer.startNotifications({},(t=>{console.log("Got steps",t),this.steps.push(t)}),(t=>{console.error("Error getting steps",t)})):console.error("Pedometer not available"),n["a"].textToSpeech.playVoice(this.$i18n.t("studies.tasks.qcst.begin")),this.timer=setInterval((()=>{120===this.countDown?n["a"].textToSpeech.playVoice(this.$i18n.t("studies.tasks.qcst.twoMin")):60===this.countDown&&n["a"].textToSpeech.playVoice(this.$i18n.t("studies.tasks.qcst.oneMin")),this.countDown>=1?this.countDown--:(this.isStarted=!1,this.completeTest())}),1e3),n["a"].metronome.start(this.cadence,this.$refs.metronome_indicator.$el))},completeTest(){n["a"].textToSpeech.playVoice(this.$i18n.t("studies.tasks.qcst.time")),o["a"].pedometer.stopNotifications();let t={userKey:r["a"].user._key,participantKey:r["a"].user.participantKey,studyKey:this.studyKey,taskId:parseInt(this.taskId),taskType:"qcst",createdTS:new Date,phone:o["a"].device,summary:{startedTS:this.startedTS,completedTS:new Date,dataType:this.taskDescr.dataType,length:this.healthData.length,steps:this.steps[this.steps.length-1],heartRate:void 0,borgScale:void 0},data:{steps:this.steps}};this.$router.push({name:"qcsthr",params:{report:t}})}},computed:{minutes(){return c["c"].pad(Math.floor(this.countDown/60),2)},seconds(){return c["c"].pad(this.countDown-60*this.minutes,2)}},beforeDestroy:function(){this.isStarted=!1,clearInterval(this.timer),n["a"].metronome.stop(),o["a"].pedometer.stopNotifications()}},p=l,u=(s("8cdf"),s("2877")),h=s("9989"),m=s("9c40"),f=s("eebe"),g=s.n(f),y=Object(u["a"])(p,a,i,!1,null,"2f7074ef",null);e["default"]=y.exports;g()(y,"components",{QPage:h["a"],QBtn:m["a"]})},f4f4:function(t,e,s){}}]);