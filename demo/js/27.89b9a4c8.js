(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{e3fb:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("q-layout",[e("q-page-container",[e("q-page",{staticClass:"flex flex-center",attrs:{padding:""}},[e("div",{staticClass:"text-center"},[e("img",{staticStyle:{width:"30vw","max-width":"150px"},attrs:{src:"logos/logo.svg"}}),e("div",{staticClass:"q-title text-h5 text-center"},[t._v("Mobistudy v "+t._s(t.appVersion))])]),e("div",{staticStyle:{width:"90vw"}},[e("q-input",{attrs:{label:t.$t("accountMgmt.email"),error:t.$v.username.$error,"error-message":t.$t("accountMgmt.emailRequiredError")},nativeOn:{blur:function(e){return t.$v.username.$touch.apply(null,arguments)}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("q-input",{attrs:{label:t.$t("accountMgmt.password"),type:t.showPassword?"text":"password",error:t.$v.password.$error,"error-message":t.$t("accountMgmt.passwordRequiredError")},nativeOn:{blur:function(e){return t.$v.password.$touch.apply(null,arguments)}},scopedSlots:t._u([{key:"append",fn:function(){return[t.showPassword?e("q-icon",{attrs:{name:"visibility_off"},on:{click:function(e){t.showPassword=!1}}}):e("q-icon",{attrs:{name:"visibility"},on:{click:function(e){t.showPassword=!0}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticClass:"row"},[e("q-btn",{staticClass:"q-ma-sm full-width mobibtn",attrs:{label:t.$t("accountMgmt.login.login"),color:"primary",type:"submit"},on:{click:t.login}}),e("q-btn",{staticClass:"q-ma-sm q-mb-lg full-width mobibtn",attrs:{label:t.$t("accountMgmt.login.lostpw"),color:"grey",flat:"",outline:"",to:"resetpw"}}),e("q-list",{staticClass:"full-width"},[e("q-separator"),e("q-item",{staticClass:"full-width"},[e("q-item-section",{staticClass:"full-width"},[e("q-item-label",{staticClass:"text-center q-mt-lg q-mb-md mobitxt1"},[t._v(t._s(t.$t("accountMgmt.login.noAcc")))])],1)],1),e("q-item",{staticClass:"full-width"},[e("q-item-section",{staticClass:"full-width"},[e("q-btn",{staticClass:"full-width mobibtn",attrs:{label:t.$t("accountMgmt.register"),color:"secondary",to:"register_pp"}})],1)],1)],1)],1)],1)])],1)],1)},r=[],o=(a("5319"),a("4caa")),i=a("b5ae"),n=a("6a6d"),l=a("c313"),c=a("9bf1"),u=a("3615"),p={name:"LoginPage",i18n:{messages:o["a"]},data(){return{username:"",password:"",error:!1,showPassword:!1}},computed:{appVersion(){return"0.3.1"}},validations:{username:{required:i["required"]},password:{required:i["required"]}},async created(){u["a"].cancelAll();try{await c["a"].logout()}catch(t){console.error(t)}l["a"].unsetToken(),await n["a"].emptyUserData()},methods:{async login(){if(this.$v.$touch(),!this.$v.$error){try{let t=await l["a"].login(this.username.toLowerCase(),this.password);if("participant"!==t.role)return void this.$q.notify({color:"negative",message:"You cannot login as researcher in the participant' app!",icon:"report_problem"});await c["a"].login(t),l["a"].setToken(t.token)}catch(t){return console.error(t),this.error=!0,void(t.response&&t.response.status&&401===t.response.status?this.$q.notify({color:"negative",message:this.$i18n.t("accountMgmt.login.loginErrorCredentials"),icon:"report_problem"}):this.$q.notify({color:"negative",message:this.$i18n.t("accountMgmt.login.loginError")+": "+t.message,icon:"report_problem"}))}try{let t=await l["a"].getProfile(c["a"].user._key);t.language&&(this.$root.$i18n.locale=t.language),await c["a"].setProfile(t),t.studies&&await n["a"].setStudiesParticipation(t.studies),this.$router.replace({name:"tasker"})}catch(t){404===t.response.status&&this.$router.replace("/register_profile")}}}}},m=p,d=a("2877"),g=a("4d5a"),w=a("09e3"),h=a("9989"),b=a("27f9"),f=a("0016"),q=a("9c40"),v=a("1c1c"),$=a("eb85"),y=a("66e5"),C=a("4074"),x=a("0170"),_=a("eebe"),k=a.n(_),M=Object(d["a"])(m,s,r,!1,null,null,null);e["default"]=M.exports;k()(M,"components",{QLayout:g["a"],QPageContainer:w["a"],QPage:h["a"],QInput:b["a"],QIcon:f["a"],QBtn:q["a"],QList:v["a"],QSeparator:$["a"],QItem:y["a"],QItemSection:C["a"],QItemLabel:x["a"]})}}]);