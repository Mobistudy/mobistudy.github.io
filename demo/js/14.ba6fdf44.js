(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"7c8b":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"text-center"},[s("div",{staticClass:"text-h5"},[t._v(t._s(t.$t("studies.tasks.capTestComplete")))]),s("img",{staticClass:"q-mx-a q-mt-lg",staticStyle:{width:"50%"},attrs:{alt:"Finish flag",src:e("0b00")}}),s("div",{staticClass:"text-h6 q-mt-md"},[t._v(t._s(t.$t("studies.tasks.capTestCompleteSubtext")))]),s("table",{staticClass:"decoratedTable q-mt-md"},[s("tr",[s("td",[t._v(t._s(t.$t("studies.tasks.vocalization.time")))]),s("td",[t._v(" "+t._s(t.minutes)+":"+t._s(t.seconds))])])]),s("div",{staticClass:"row justify-around q-mt-xl"},[s("q-btn",{attrs:{color:"secondary",loading:t.sending,label:t.$t("common.discard")},on:{click:function(s){return t.discard()}}}),s("q-btn",{attrs:{color:"primary",loading:t.sending,label:t.$t("common.send")},on:{click:function(s){return t.send()}}})],1)])])},r=[],n=(e("14d9"),e("c313")),i=e("6a6d"),o=e("e13b"),c=e("7937");const d="shared";var l={name:"SMWTSummaryPage",props:{report:Object},data:function(){return{sending:!1}},methods:{async saveAndLeave(t){try{if(t)for(let t=0;t<this.report.attachments.length;t++){let s=this.report.attachments[t],e=await o["a"].load(s,d,"blob");await n["a"].sendAttachment(this.report.studyKey,this.report.taskId,s,e)}await n["a"].sendTasksResults(this.report),await i["a"].setTaskCompletion(this.report.studyKey,this.report.taskId,new Date),this.$router.push({name:"home"})}catch(s){this.sending=!1,console.error(s),this.$q.notify({color:"negative",message:this.$t("errors.connectionError")+" "+s.message,icon:"report_problem"})}},async send(){return this.sending=!0,this.report.discarded=!1,this.saveAndLeave(!0)},async discard(){return this.sending=!0,this.report.discarded=!0,delete this.report.summary,delete this.report.attachments,this.saveAndLeave(!1)}},computed:{totalTime(){return Math.floor((this.report.summary.completedTS-this.report.summary.startedTS)/1e3)},minutes(){return c["c"].pad(Math.floor(this.totalTime/60),2)},seconds(){return c["c"].pad(Math.floor(this.totalTime-60*this.minutes),2)}}},m=l,h=(e("b9c0"),e("2877")),u=e("9989"),p=e("9c40"),b=e("eebe"),g=e.n(b),v=Object(h["a"])(m,a,r,!1,null,null,null);s["default"]=v.exports;g()(v,"components",{QPage:u["a"],QBtn:p["a"]})},b9c0:function(t,s,e){"use strict";e("c070")},c070:function(t,s,e){}}]);